services:
  - type: web
    name: sistema-amenazas
    env: python
    region: frankfurt  # Evita timeouts Europa
    buildCommand: |
      pip install --upgrade pip==26.0.1 setuptools wheel
      pip install --only-binary=:all: pandas==2.2.3 numpy scikit-learn xgboost
      pip install -r requirements.txt --no-deps
    startCommand: uvicorn main:app --host 0.0.0.0 --port $PORT --workers 1
    envVars:
      - key: PYTHON_VERSION
        value: "3.12"
      - key: PIP_NO_BINARY
        value: ""
      - key: PIP_ONLY_BINARY
        value: ":all:"
